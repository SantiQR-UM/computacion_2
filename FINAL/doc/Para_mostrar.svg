<svg width="1200" height="1000" xmlns="http://www.w3.org/2000/svg">
 <defs>
  <marker orient="auto" refY="3" refX="9" markerHeight="10" markerWidth="10" id="arrowhead">
   <polygon id="svg_1" fill="#333" points="0 0, 10 3, 0 6"/>
  </marker>
 </defs>
 <!-- Title -->
 <!-- Cliente -->
 <!-- Servidor (asyncio) -->
 <!-- HTTP Preview (NO implementado) -->
 <!-- Conexiones Cliente-Servidor -->
 <!-- Redis (diamante) -->
 <!-- Filesystem Compartido -->
 <!-- Conexiones Servidor-Redis -->
 <!-- Conexión Servidor-Filesystem (polling) -->
 <!-- Workers Container -->
 <!-- Worker 1 -->
 <!-- Worker 2 -->
 <!-- Worker 3 -->
 <!-- Worker 4 -->
 <!-- Conexiones Redis-Workers -->
 <!-- Conexiones Workers-Filesystem -->
 <!-- Notas explicativas -->
 <g>
  <title>Layer 1</title>
  <text id="svg_2" text-anchor="middle" fill="#333" font-family="Arial, sans-serif" font-weight="bold" font-size="16px" class="title" y="30" x="600">Sistema Distribuido de Procesamiento de Video - Arquitectura Implementada</text>
  <text id="svg_3" fill="#666" font-family="Arial, sans-serif" font-size="11px" class="small-text" y="51" x="431">Frames completos + Filesystem compartido + Celery + asyncio</text>
  <rect id="svg_4" stroke-width="2" stroke="#333" fill="white" class="box" rx="15" height="140" width="154" y="100" x="75"/>
  <text id="svg_5" text-anchor="middle" fill="#333" font-weight="bold" font-size="16px" font-family="Arial, sans-serif" class="title" y="130" x="140">Cliente CLI</text>
  <text id="svg_6" fill="#333" font-size="13px" font-family="Arial, sans-serif" class="text" y="155" x="140">argparse</text>
  <text id="svg_7" fill="#666" font-size="11px" font-family="Arial, sans-serif" class="small-text" y="175" x="140">--video input.mp4</text>
  <text id="svg_8" fill="#666" font-size="11px" font-family="Arial, sans-serif" class="small-text" y="190" x="140">--processing blur</text>
  <text id="svg_9" fill="#666" font-size="11px" font-family="Arial, sans-serif" class="small-text" y="205" x="140">--ipv6 / --ipv4</text>
  <text id="svg_10" fill="#666" font-size="11px" font-family="Arial, sans-serif" class="small-text" y="220" x="140">--out output.mp4</text>
  <path id="svg_11" d="m355,84c0,-8.15068 6.84932,-15 15,-15l290,0c8.15068,0 15,6.84932 15,15l0,170c0,8.15068 -6.84932,15 -15,15l-290,0c-8.15068,0 -15,-6.84932 -15,-15l0,-170z" opacity="undefined" stroke-width="2" stroke="#333" fill="white"/>
  <text id="svg_12" text-anchor="middle" fill="#333" font-weight="bold" font-size="16px" font-family="Arial, sans-serif" class="title" y="110" x="510">Servidor (asyncio)</text>
  <text id="svg_13" fill="#333" font-size="13px" font-family="Arial, sans-serif" class="text" y="144" x="435">1. Extrae frames con OpenCV</text>
  <text id="svg_14" fill="#333" font-size="13px" font-family="Arial, sans-serif" class="text" y="161" x="469">(cv2.VideoCapture)</text>
  <text id="svg_15" fill="#333" font-size="13px" font-family="Arial, sans-serif" class="text" y="181" x="437">2. Encola frame COMPLETO</text>
  <text id="svg_16" fill="#333" font-size="13px" font-family="Arial, sans-serif" class="text" y="199" x="462">a Celery (1 task por frame)</text>
  <text id="svg_17" fill="#333" font-size="13px" font-family="Arial, sans-serif" class="text" y="220" x="439">3. Polling: espera archivos</text>
  <text id="svg_18" fill="#333" font-size="13px" font-family="Arial, sans-serif" class="text" y="239" x="438">4. Re-ensambla video MP4</text>
  <text id="svg_19" fill="#666" font-size="11px" font-family="Arial, sans-serif" class="small-text" y="260" x="459">+ metrics collector</text>
  <rect id="svg_20" stroke-dasharray="3,3" stroke="#ff6666" fill="#ffe6e6" class="note-box" rx="15" height="120" width="200" y="100" x="750"/>
  <text id="svg_21" text-anchor="middle" font-weight="bold" font-size="16px" font-family="Arial, sans-serif" fill="#333" class="title" y="130" x="850">HTTP Preview</text>
  <text id="svg_22" font-size="13px" font-family="Arial, sans-serif" fill="#333" class="text" y="154" x="781">❌ NO IMPLEMENTADO</text>
  <text id="svg_23" font-size="11px" font-family="Arial, sans-serif" fill="#666" class="small-text" y="175" x="850">:8080 (planeado)</text>
  <text id="svg_24" font-size="11px" font-family="Arial, sans-serif" fill="#666" class="small-text" y="190" x="850">/metrics</text>
  <text id="svg_25" font-size="11px" font-family="Arial, sans-serif" fill="#666" class="small-text" y="205" x="850">/frame/&lt;n&gt;</text>
  <path id="svg_26" marker-end="url(#arrowhead)" fill="none" stroke-width="2" stroke="#333" class="arrow" d="m230,170l120,0"/>
  <text id="svg_27" fill="#666" font-size="11px" font-family="Arial, sans-serif" class="small-text" y="160" x="270">TCP dual-stack</text>
  <text id="svg_28" fill="#666" font-size="11px" font-family="Arial, sans-serif" class="small-text" y="185" x="270">IPv4/IPv6, :9090</text>
  <path id="svg_29" stroke-dasharray="5,5" marker-end="url(#arrowhead)" fill="none" stroke-width="2" stroke="#333" class="arrow dashed" d="m350,200l-120,0"/>
  <text id="svg_30" fill="#666" font-size="11px" font-family="Arial, sans-serif" class="small-text" y="220" x="250">JSON + video</text>
  <g id="svg_31">
   <path id="svg_32" stroke-width="2" stroke="#e74c3c" fill="white" class="redis-diamond" d="m510,341l80,50l-80,50l-80,-50l80,-50z"/>
   <text id="svg_33" text-anchor="middle" font-weight="bold" font-size="16px" font-family="Arial, sans-serif" fill="#333" class="title" y="379" x="510">Redis</text>
   <text id="svg_34" fill="#666" font-size="11px" font-family="Arial, sans-serif" class="small-text" y="396" x="482">(solo broker)</text>
   <text id="svg_35" fill="#666" font-family="Arial, sans-serif" font-size="11px" class="small-text" y="410" x="477">result backend</text>
   <text id="svg_36" fill="#666" font-family="Arial, sans-serif" font-size="11px" class="small-text" y="423" x="487">eliminado</text>
  </g>
  <rect id="svg_37" stroke-width="2" stroke="#8b4513" fill="#fff8dc" class="filesystem-box" rx="10" height="120" width="220" y="340" x="720"/>
  <text id="svg_38" text-anchor="middle" font-weight="bold" font-size="16px" font-family="Arial, sans-serif" fill="#333" class="title" y="370" x="830">Volumen Compartido</text>
  <text id="svg_39" fill="#333" font-size="13px" font-family="Arial, sans-serif" class="text" y="395" x="830">/app/data/frames/</text>
  <text id="svg_40" fill="#666" font-size="11px" font-family="Arial, sans-serif" class="small-text" y="415" x="830">frame_000001.png</text>
  <text id="svg_41" fill="#666" font-size="11px" font-family="Arial, sans-serif" class="small-text" y="430" x="830">frame_000001.json</text>
  <text id="svg_42" fill="#666" font-size="11px" font-family="Arial, sans-serif" class="small-text" y="445" x="830">frame_000002.png</text>
  <path id="svg_43" marker-end="url(#arrowhead)" fill="none" stroke-width="2" stroke="#333" class="arrow" d="m510,280l0,60"/>
  <text id="svg_44" fill="#666" font-size="11px" font-family="Arial, sans-serif" class="small-text" y="310" x="430">encola tasks</text>
  <text id="svg_45" fill="#666" font-size="11px" font-family="Arial, sans-serif" class="small-text" y="325" x="430">(broker)</text>
  <path id="svg_46" stroke-dasharray="5,5" marker-end="url(#arrowhead)" fill="none" stroke-width="2" stroke="#333" class="arrow dashed" d="m670,220l50,160"/>
  <text id="svg_47" font-size="11px" font-family="Arial, sans-serif" fill="#666" class="small-text" y="299" x="703">polling</text>
  <text id="svg_48" font-size="11px" font-family="Arial, sans-serif" fill="#666" class="small-text" y="314" x="705">async</text>
  <rect id="svg_49" stroke-width="2" stroke="#333" fill="white" class="box" rx="10" height="400" width="1040" y="549" x="80"/>
  <text id="svg_50" text-anchor="middle" fill="#333" font-weight="bold" font-family="Arial, sans-serif" font-size="16px" class="title" y="580" x="600">Workers Pool (Celery) - 4 contenedores Docker</text>
  <g id="svg_51">
   <rect id="svg_52" stroke-width="2" stroke="#333" fill="white" class="box" rx="10" height="300" width="230" y="610" x="120"/>
   <text id="svg_53" text-anchor="middle" fill="#333" font-weight="bold" font-size="16px" font-family="Arial, sans-serif" class="title" y="640" x="235">Worker 1</text>
   <text id="svg_54" fill="#666" font-size="11px" font-family="Arial, sans-serif" class="small-text" y="660" x="235">celery worker</text>
   <rect id="svg_55" stroke-width="2" stroke="#333" fill="white" class="box" rx="5" height="50" width="190" y="680" x="140"/>
   <text id="svg_56" fill="#333" font-size="13px" font-family="Arial, sans-serif" class="text" y="705" x="194">process_frame()</text>
   <text id="svg_57" fill="#666" font-size="11px" font-family="Arial, sans-serif" class="small-text" y="722" x="198">Frame COMPLETO</text>
   <rect id="svg_58" stroke-width="2" stroke="#333" fill="white" class="box" rx="3" height="30" width="170" y="740" x="150"/>
   <text id="svg_59" fill="#666" font-size="11px" font-family="Arial, sans-serif" class="small-text" y="759" x="207">Filtros OpenCV</text>
   <rect id="svg_60" stroke-width="2" stroke="#333" fill="white" class="box" rx="3" height="30" width="170" y="775" x="150"/>
   <text id="svg_61" fill="#666" font-size="11px" font-family="Arial, sans-serif" class="small-text" y="794" x="195">blur / edges / faces</text>
   <rect id="svg_62" stroke-width="2" stroke="#333" fill="white" class="box" rx="3" height="30" width="170" y="810" x="150"/>
   <text id="svg_63" fill="#666" font-size="11px" font-family="Arial, sans-serif" class="small-text" y="829" x="198">→ frame procesado</text>
   <rect id="svg_64" stroke-width="2" stroke="#333" fill="white" class="box" rx="3" height="50" width="170" y="845" x="150"/>
   <text id="svg_65" font-size="11px" font-family="Arial, sans-serif" fill="#666" class="small-text" y="863" x="204">Escribe a disco:</text>
   <text id="svg_66" font-size="11px" font-family="Arial, sans-serif" fill="#666" class="small-text" y="878" x="196">PNG + JSON stats</text>
  </g>
  <g id="svg_67">
   <rect id="svg_68" stroke-width="2" stroke="#333" fill="white" class="box" rx="10" height="300" width="230" y="609" x="392"/>
   <text id="svg_69" text-anchor="middle" fill="#333" font-weight="bold" font-size="16px" font-family="Arial, sans-serif" class="title" y="639" x="507">Worker 2</text>
   <text id="svg_70" fill="#666" font-size="11px" font-family="Arial, sans-serif" class="small-text" y="659" x="507">celery worker</text>
   <rect id="svg_71" stroke-width="2" stroke="#333" fill="white" class="box" rx="5" height="50" width="190" y="679" x="412"/>
   <text id="svg_72" fill="#333" font-size="13px" font-family="Arial, sans-serif" class="text" y="701" x="486">process_frame()</text>
   <text id="svg_73" fill="#666" font-size="11px" font-family="Arial, sans-serif" class="small-text" y="718" x="479">Frame COMPLETO</text>
   <rect id="svg_74" stroke-width="2" stroke="#333" fill="white" class="box" rx="3" height="30" width="170" y="739" x="422"/>
   <text id="svg_75" fill="#666" font-size="11px" font-family="Arial, sans-serif" class="small-text" y="757" x="475">Filtros OpenCV</text>
   <rect id="svg_76" stroke-width="2" stroke="#333" fill="white" class="box" rx="3" height="30" width="170" y="774" x="422"/>
   <text id="svg_77" fill="#666" font-size="11px" font-family="Arial, sans-serif" class="small-text" y="794" x="478">motion / custom</text>
   <rect id="svg_78" stroke-width="2" stroke="#333" fill="white" class="box" rx="3" height="30" width="170" y="809" x="422"/>
   <text id="svg_79" fill="#666" font-size="11px" font-family="Arial, sans-serif" class="small-text" y="827" x="472">→ frame procesado</text>
   <rect id="svg_80" stroke-width="2" stroke="#333" fill="white" class="box" rx="3" height="50" width="170" y="844" x="422"/>
   <text id="svg_81" font-size="11px" font-family="Arial, sans-serif" fill="#666" class="small-text" y="864" x="481">Escribe a disco:</text>
   <text id="svg_82" font-size="11px" font-family="Arial, sans-serif" fill="#666" class="small-text" y="879" x="484">PNG + JSON stats</text>
  </g>
  <g id="svg_83">
   <rect id="svg_84" stroke-width="2" stroke="#333" fill="white" class="box" rx="10" height="300" width="230" y="610" x="660"/>
   <text id="svg_85" text-anchor="middle" fill="#333" font-weight="bold" font-size="16px" font-family="Arial, sans-serif" class="title" y="640" x="775">Worker 3</text>
   <text id="svg_86" fill="#666" font-size="11px" font-family="Arial, sans-serif" class="small-text" y="660" x="775">celery worker</text>
   <rect id="svg_87" stroke-width="2" stroke="#333" fill="white" class="box" rx="5" height="50" width="190" y="680" x="680"/>
   <text id="svg_88" fill="#333" font-size="13px" font-family="Arial, sans-serif" class="text" y="703" x="733">process_frame()</text>
   <text id="svg_89" fill="#666" font-size="11px" font-family="Arial, sans-serif" class="small-text" y="722" x="736">Frame COMPLETO</text>
   <rect id="svg_90" stroke-width="2" stroke="#333" fill="white" class="box" rx="3" height="30" width="170" y="740" x="690"/>
   <text id="svg_91" fill="#666" font-size="11px" font-family="Arial, sans-serif" class="small-text" y="758" x="744">Filtros OpenCV</text>
   <rect id="svg_92" stroke-width="2" stroke="#333" fill="white" class="box" rx="3" height="30" width="170" y="775" x="690"/>
   <text id="svg_93" fill="#666" font-size="11px" font-family="Arial, sans-serif" class="small-text" y="792" x="746">configurables</text>
   <rect id="svg_94" stroke-width="2" stroke="#333" fill="white" class="box" rx="3" height="30" width="170" y="810" x="690"/>
   <text id="svg_95" fill="#666" font-size="11px" font-family="Arial, sans-serif" class="small-text" y="828" x="739">→ frame procesado</text>
   <rect id="svg_96" stroke-width="2" stroke="#333" fill="white" class="box" rx="3" height="50" width="170" y="845" x="690"/>
   <text id="svg_97" font-size="11px" font-family="Arial, sans-serif" fill="#666" class="small-text" y="863" x="748">Escribe a disco:</text>
   <text id="svg_98" font-size="11px" font-family="Arial, sans-serif" fill="#666" class="small-text" y="880" x="743">PNG + JSON stats</text>
  </g>
  <g id="svg_99">
   <rect id="svg_100" stroke-width="2" stroke="#333" fill="white" class="box" rx="10" height="300" width="170" y="609" x="929"/>
   <text id="svg_101" text-anchor="middle" fill="#333" font-weight="bold" font-size="16px" font-family="Arial, sans-serif" class="title" y="639" x="1014">Worker 4</text>
   <text id="svg_102" fill="#666" font-size="11px" font-family="Arial, sans-serif" class="small-text" y="659" x="1014">celery worker</text>
   <rect id="svg_103" stroke-width="2" stroke="#333" fill="white" class="box" rx="5" height="50" width="150" y="679" x="939"/>
   <text id="svg_104" fill="#333" font-family="Arial, sans-serif" font-size="13px" class="text" y="698" x="986">process_frame()</text>
   <text id="svg_105" fill="#666" font-size="11px" font-family="Arial, sans-serif" class="small-text" y="719" x="988">Frame COMPLETO</text>
   <rect id="svg_106" stroke-width="2" stroke="#333" fill="white" class="box" rx="3" height="30" width="130" y="739" x="949"/>
   <text id="svg_107" fill="#666" font-size="11px" font-family="Arial, sans-serif" class="small-text" y="757" x="996">Filtros OpenCV</text>
   <rect id="svg_108" stroke-width="2" stroke="#333" fill="white" class="box" rx="3" height="30" width="130" y="774" x="949"/>
   <text id="svg_109" fill="#666" font-size="11px" font-family="Arial, sans-serif" class="small-text" y="794" x="1014">+ detección</text>
   <rect id="svg_110" stroke-width="2" stroke="#333" fill="white" class="box" rx="3" height="30" width="130" y="809" x="949"/>
   <text id="svg_111" fill="#666" font-size="11px" font-family="Arial, sans-serif" class="small-text" y="826" x="1010">→ procesado</text>
   <rect id="svg_112" stroke-width="2" stroke="#333" fill="white" class="box" rx="3" height="50" width="130" y="844" x="949"/>
   <text id="svg_113" font-family="Arial, sans-serif" font-size="11px" fill="#666" class="small-text" y="864" x="982">Escribe a disco:</text>
   <text id="svg_114" font-family="Arial, sans-serif" font-size="11px" fill="#666" class="small-text" y="879" x="990">PNG + JSON</text>
  </g>
  <path id="svg_115" marker-end="url(#arrowhead)" fill="none" stroke-width="2" stroke="#333" class="arrow" d="m460,420l-225,190"/>
  <path id="svg_116" marker-end="url(#arrowhead)" fill="none" stroke-width="2" stroke="#333" class="arrow" d="m491,429l14,181"/>
  <path id="svg_117" marker-end="url(#arrowhead)" fill="none" stroke-width="2" stroke="#333" class="arrow" d="m529,428l246,181"/>
  <path id="svg_118" marker-end="url(#arrowhead)" fill="none" stroke-width="2" stroke="#333" class="arrow" d="m550,420l465,190"/>
  <text id="svg_119" fill="#666" font-size="11px" font-family="Arial, sans-serif" class="small-text" y="508" x="369">distribuye tareas (broker)</text>
  <path id="svg_120" stroke-dasharray="5,5" marker-end="url(#arrowhead)" fill="none" stroke-width="2" stroke="#333" class="arrow dashed" d="m350,840l370,-420"/>
  <path id="svg_121" stroke-dasharray="5,5" marker-end="url(#arrowhead)" fill="none" stroke-width="2" stroke="#333" class="arrow dashed" d="m620,840l160,-380"/>
  <path id="svg_122" stroke-dasharray="5,5" marker-end="url(#arrowhead)" fill="none" stroke-width="2" stroke="#333" class="arrow dashed" d="m890,840l-50,-380"/>
  <path id="svg_123" stroke-dasharray="5,5" marker-end="url(#arrowhead)" fill="none" stroke-width="2" stroke="#333" class="arrow dashed" d="m1015,840l-115,-380"/>
  <text id="svg_124" font-size="11px" font-family="Arial, sans-serif" fill="#666" class="small-text" y="492" x="927">escriben frames procesados</text>
  <text id="svg_125" font-size="11px" font-family="Arial, sans-serif" fill="#666" class="small-text" y="515" x="931">+ JSON con estadísticas</text>
 </g>
</svg>